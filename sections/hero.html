<!-- sections/hero.html -->
<section id="hero" class="hero-section" aria-labelledby="hero-title">
  <!-- Scoped styles untuk section ini -->
  <style>
    /* =========================
       HERO SECTION - scoped with enhanced elegance and animations
       ========================= */
    /* Prevent styles bleeding by scoping under .hero-section */
    .hero-section {
      --primary-600: #2b74d9;
      --primary-500: #3b88ee;
      --accent-400: #7dd3fc;
      --muted-700: #243341;
      --muted-500: #52677d;
      --bg-start: #eaf4ff;
      --bg-end: #ffffff;
      padding: 80px 18px;
      background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 50%, rgba(255,255,255,0.8) 100%);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      font-family: "Inter", "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color: var(--muted-700);
      overflow: hidden;
      position: relative;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .hero-section .container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 520px;
      gap: 40px;
      align-items: center;
      padding: 4px 12px;
      opacity: 0;
      transform: translateY(30px);
      animation: fadeInUp 1s ease-out 0.2s forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* LEFT */
    .hero-section .hero-left {
      padding-right: 12px;
      animation: slideInLeft 1s ease-out 0.5s both;
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .hero-section .hero-logo {
      height: 40px;
      margin-bottom: 16px;
      display: inline-block;
      opacity: 0;
      animation: fadeIn 1s ease-out 0.7s forwards;
      transition: transform 0.3s ease;
    }

    .hero-section .hero-logo:hover {
      transform: scale(1.05);
    }

    @keyframes fadeIn {
      to { opacity: 1; }
    }

    .hero-section h1#hero-title {
      font-size: 52px;
      line-height: 1.02;
      margin: 0 0 14px 0;
      color: #072033;
      font-weight: 700;
      letter-spacing: -0.02em;
      background: linear-gradient(90deg, var(--primary-600), var(--primary-500));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      opacity: 0;
      animation: fadeInUp 1s ease-out 0.8s forwards;
    }

    .hero-section p.hero-sub {
      color: var(--muted-500);
      max-width: 560px;
      margin-bottom: 22px;
      font-size: 18px;
      opacity: 0;
      animation: fadeIn 1s ease-out 1s forwards;
    }

    .hero-section .hero-ctas {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 22px;
      flex-wrap: wrap;
      opacity: 0;
      animation: fadeInUp 1s ease-out 1.1s forwards;
    }

    .hero-section .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 12px 20px;
      border-radius: 16px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      cursor: pointer;
      border: none;
      -webkit-tap-highlight-color: transparent;
      position: relative;
      overflow: hidden;
    }

    .hero-section .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .hero-section .btn:hover::before {
      left: 100%;
    }

    .hero-section .btn:active {
      transform: translateY(2px);
    }

    .hero-section .btn-primary {
      background: linear-gradient(90deg, var(--primary-600), var(--primary-500));
      color: #fff;
      box-shadow: 0 10px 28px rgba(59,136,238,0.3);
    }

    .hero-section .btn-primary:hover {
      box-shadow: 0 15px 35px rgba(59,136,238,0.4);
      transform: translateY(-2px);
    }

    .hero-section .btn-ghost {
      background: transparent;
      color: var(--muted-700);
      border: 2px solid rgba(36,51,65,0.2);
    }

    .hero-section .btn-ghost:hover {
      background: rgba(36,51,65,0.05);
      border-color: var(--primary-500);
    }

    /* partners */
    .hero-section .powered-by {
      margin-top: 6px;
      color: #7f93a6;
      font-size: 12px;
      opacity: 0;
      animation: fadeIn 1s ease-out 1.3s forwards;
    }

    .hero-section .partners {
      display: flex;
      gap: 12px;
      margin-top: 8px;
      align-items: center;
      flex-wrap: wrap;
      opacity: 0;
      animation: fadeInUp 1s ease-out 1.4s forwards;
    }

    .hero-section .partners img {
      height: 24px;
      opacity: 0.95;
      transition: transform 0.3s ease;
    }

    .hero-section .partners img:hover {
      transform: scale(1.1);
    }

    /* RIGHT composition */
    .hero-section .hero-right {
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 18px;
      animation: slideInRight 1s ease-out 0.5s both;
    }

    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .hero-section .hero-card {
      background: transparent;
      border-radius: 18px;
      position: relative;
    }

    /* top small stat + portrait */
    .hero-section .hero-card-top {
      display: flex;
      align-items: flex-start;
      gap: 14px;
      justify-content: flex-end;
    }

    .hero-section .stat-block {
      background: linear-gradient(135deg, #5aa0ff, #2b74d9);
      color: #fff;
      padding: 16px 18px;
      border-radius: 16px;
      min-width: 160px;
      box-shadow: 0 12px 30px rgba(43,116,217,0.2);
      text-align: left;
      opacity: 0;
      animation: bounceIn 1s ease-out 0.6s forwards;
      transition: transform 0.3s ease;
    }

    .hero-section .stat-block:hover {
      transform: scale(1.05);
    }

    @keyframes bounceIn {
      0% {
        opacity: 0;
        transform: scale(0.3);
      }
      50% {
        opacity: 1;
        transform: scale(1.05);
      }
      70% {
        transform: scale(0.9);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .hero-section .stat-number {
      font-weight: 700;
      font-size: 24px;
      margin-bottom: 6px;
      animation: countUp 2s ease-out 1.2s forwards;
    }

    @keyframes countUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .hero-section .stat-note {
      font-size: 12px;
      opacity: 0.95;
    }

    .hero-section .hero-thumb img {
      width: 190px;
      height: 190px;
      object-fit: cover;
      border-radius: 16px;
      box-shadow: 0 18px 40px rgba(17,17,17,0.1);
      border: 6px solid rgba(255,255,255,0.8);
      background: linear-gradient(135deg, rgba(255,255,255,0.4), rgba(255,255,255,0.1));
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      opacity: 0;
      animation: fadeInScale 1s ease-out 0.8s forwards;
    }

    .hero-section .hero-thumb img:hover {
      transform: scale(1.05) rotate(2deg);
      box-shadow: 0 20px 50px rgba(17,17,17,0.15);
    }

    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* bottom wide image + floating stats */
    .hero-section .hero-card-bottom {
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      opacity: 0;
      animation: fadeInUp 1s ease-out 1s forwards;
    }

    .hero-section .wide-image {
      width: 100%;
      display: block;
      border-radius: 16px;
      box-shadow: 0 12px 28px rgba(36,51,65,0.08);
      transition: transform 0.3s ease;
    }

    .hero-section .wide-image:hover {
      transform: scale(1.02);
    }

    .hero-section .floating-stats {
      position: absolute;
      right: 12px;
      top: 8%;
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 5;
    }

    .hero-section .floating-stats .float-item {
      background: rgba(15,33,51,0.9);
      backdrop-filter: blur(10px);
      color: #fff;
      padding: 12px 14px;
      border-radius: 12px;
      min-width: 90px;
      text-align: center;
      box-shadow: 0 8px 24px rgba(15,33,51,0.3);
      opacity: 0;
      animation: slideInRight 1s ease-out 1.2s forwards;
      transition: transform 0.3s ease;
    }

    .hero-section .floating-stats .float-item:nth-child(1) { animation-delay: 1.2s; }
    .hero-section .floating-stats .float-item:nth-child(2) { animation-delay: 1.4s; }
    .hero-section .floating-stats .float-item:nth-child(3) { animation-delay: 1.6s; }

    .hero-section .floating-stats .float-item:hover {
      transform: translateX(-5px);
    }

    .hero-section .float-item .number {
      font-weight: 700;
      font-size: 20px;
      animation: countUp 2s ease-out 1.5s forwards;
    }

    .hero-section .float-item .label {
      font-size: 11px;
      opacity: 0.92;
      text-transform: lowercase;
    }

    /* decorative elements */
    .hero-section .hero-deco {
      position: absolute;
      right: -60px;
      top: -60px;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(59,136,238,0.15), rgba(43,116,217,0.05));
      pointer-events: none;
      z-index: 0;
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    .hero-section .hero-deco::after {
      content: '';
      position: absolute;
      top: 20px;
      left: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: rgba(125,211,252,0.3);
      animation: pulse 3s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.2); opacity: 1; }
    }

    /* responsive */
    @media (max-width: 980px) {
      .hero-section .container {
        grid-template-columns: 1fr;
        gap: 30px;
        padding: 20px 12px;
      }
      .hero-section h1#hero-title {
        font-size: 36px;
      }
      .hero-section .hero-right {
        order: -1;
      }
      .hero-section .hero-thumb img {
        width: 140px;
        height: 140px;
      }
      .hero-section .floating-stats {
        right: 12px;
        top: auto;
        bottom: 12px;
        flex-direction: row;
        gap: 8px;
      }
      .hero-section .floating-stats .float-item {
        padding: 10px 12px;
        min-width: auto;
      }
    }

    @media (max-width: 480px) {
      .hero-section h1#hero-title {
        font-size: 30px;
      }
      .hero-section .stat-block {
        min-width: 120px;
        padding: 14px;
      }
      .hero-section .hero-thumb img {
        width: 120px;
        height: 120px;
      }
    }
  </style>

  <div class="container">
    <!-- LEFT: headline + copy + ctas -->
    <div class="hero-left">
      <img src="assets/logo-bbi.png" alt="PT Braco Bumi Internasional" class="hero-logo" />

      <h1 id="hero-title">
        Keamanan Lapangan yang <br />
        Meningkat — Hasil yang Nyata
      </h1>

      <p class="hero-sub">
        PT Braco Bumi Internasional membantu perusahaan meningkatkan standar
        keselamatan kerja melalui inspeksi terukur, pelatihan praktis, dan solusi
        alat yang sesuai kebutuhan operasional.
      </p>

      <div class="hero-ctas" role="group" aria-label="CTA hero">
        <a href="#form-visit" class="btn btn-primary" id="hero-cta-primary">Ajukan Kunjungan</a>
        <a href="#services" class="btn btn-ghost" id="hero-cta-secondary">Lihat Layanan</a>
      </div>

      <div class="powered-by" aria-hidden="false">
        <small>Didukung oleh</small>
        <div class="partners" aria-hidden="true">
          <img src="assets/logo-dlh.png" alt="DLH" />
          <img src="assets/logo-disnaker.png" alt="Disnaker" />
          <div class="hero-thumb" role="img" aria-label="Teknisi lapangan">
            <img src="assets/hero-subject.png" alt="Teknisi lapangan" />
          </div>
      </div>
    </div>

    <!-- RIGHT: image composition + stats cards -->
    <div class="hero-right" aria-hidden="false">
      <div class="hero-card hero-card-top" aria-hidden="true">
        <div class="stat-block" role="figure" aria-label="Total jam pelatihan">
          <div class="stat-number">124K+</div>
          <div class="stat-note">Jam pelatihan & inspeksi terakumulasi</div>
        </div>

        <div class="hero-thumb" role="img" aria-label="Teknisi lapangan">
          <img src="../assets/hero-subject.png" alt="Teknisi lapangan" />
        </div>
      </div>

      <div class="hero-card hero-card-bottom" aria-hidden="true">
        <img class="wide-image" src="assets/hero-field.jpg" alt="Tim di lokasi" />
        <div class="floating-stats" aria-hidden="true">
          <div class="float-item">
            <div class="number">98%</div>
            <div class="label">tingkat kepuasan</div>
          </div>
          <div class="float-item">
            <div class="number">14K</div>
            <div class="label">proyek sukses</div>
          </div>
          <div class="float-item">
            <div class="number">5,8K</div>
            <div class="label">klien terlayani</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="hero-deco" aria-hidden="true"></div>

  <!-- Scoped JS untuk section ini -->
    <script>
      (function () {
        // scoped IIFE supaya tidak bocor ke global
        const section = document.getElementById('hero');
        if (!section) return;

        // helper: smooth scroll
        const supportsSmooth = 'scrollBehavior' in document.documentElement.style;
        function smoothScrollTo(hash) {
          const el = document.querySelector(hash);
          if (!el) return;
          // move focus for accessibility
          el.setAttribute('tabindex', '-1');
          if (supportsSmooth && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
            // focusing after slight delay to let scrolling settle
            setTimeout(() => el.focus({ preventScroll: true }), 400);
          } else {
            const top = el.getBoundingClientRect().top + window.pageYOffset;
            window.scrollTo(0, top);
            el.focus({ preventScroll: true });
          }
        }

        // Attach smooth scrolling to hero CTA links inside this section
        const ctas = section.querySelectorAll('.hero-ctas a[href^="#"]');
        ctas.forEach((cta) => {
          // make keyboard Enter behave like click for accessibility when anchor looks like button
          cta.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              cta.click();
            }
          });

          cta.addEventListener('click', (e) => {
            const href = cta.getAttribute('href');
            if (href && href.startsWith('#')) {
              e.preventDefault();
              smoothScrollTo(href);
            }
          });
        });

        // COUNTER ANIMATION (stat-number and floating numbers)
        const numberElems = Array.from(section.querySelectorAll('.stat-number, .float-item .number'));
        function parseNumber(text) {
          // keep digits only, return Number (attempt)
          const digits = ('' + text).replace(/[^\d]/g, '');
          return digits ? parseInt(digits, 10) : 0;
        }
        function formatWithSuffix(n, originalText) {
          // keep same suffix if present (like "K+" or ",")
          const suffixMatch = ('' + originalText).match(/[^0-9.,\s]+$/);
          return suffixMatch ? `${n}${suffixMatch[0]}` : String(n);
        }

        function animateCount(el, toValue, duration = 1400) {
          if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            el.textContent = formatWithSuffix(toValue, el.textContent);
            return;
          }
          const start = 0;
          const startTime = performance.now();
          const step = (now) => {
            const t = Math.min((now - startTime) / duration, 1);
            // easeOutCubic
            const eased = 1 - Math.pow(1 - t, 3);
            const current = Math.round(start + eased * (toValue - start));
            el.textContent = formatWithSuffix(current, el.textContent);
            if (t < 1) requestAnimationFrame(step);
          };
          requestAnimationFrame(step);
        }

        // Use IntersectionObserver to trigger animations once
        const observerOptions = {
          root: null,
          rootMargin: '0px',
          threshold: 0.25,
        };

        const onIntersect = (entries, obs) => {
          entries.forEach((entry) => {
            if (!entry.isIntersecting) return;
            const tgt = entry.target;

            // stat-number (may include "K+" etc) -> animate only digits part
            if (tgt.matches('.stat-number, .float-item .number')) {
              const orig = tgt.textContent.trim();
              const targetValue = parseNumber(orig);
              // if number uses K (e.g., 124K) approximate by multiplying if necessary
              // We attempt a simple heuristic: if original contains K or M, scale from digits:
              const hasK = /k/i.test(orig);
              const hasM = /m/i.test(orig);
              let numericTarget = targetValue;
              if (targetValue > 0 && (hasK || hasM)) {
                if (hasM) numericTarget = Math.round(targetValue * 1000000 / Math.pow(10, String(targetValue).length - 1));
                else if (hasK) numericTarget = Math.round(targetValue * 1000 / Math.pow(10, String(targetValue).length - 1));
                // But keep it reasonable: if orig had "124K+" we want to animate to 124 (then re-append K+)
                // so prefer to animate the base digits and preserve suffix in formatWithSuffix
                numericTarget = parseNumber(orig);
              }
              animateCount(tgt, numericTarget);
              // small reveal class
              tgt.style.opacity = '1';
            }

            // reveal container elements with CSS animations already defined (we just ensure they get class)
            if (tgt.classList && tgt.classList.contains('hero-card-bottom')) {
              tgt.style.opacity = '1';
            }

            // lazy-load images inside observed entry (if any)
            const imgs = tgt.querySelectorAll ? tgt.querySelectorAll('img[data-src]') : [];
            imgs.forEach((img) => {
              if (img.dataset && img.dataset.src) {
                img.setAttribute('src', img.dataset.src);
                img.removeAttribute('data-src');
                img.addEventListener('load', () => img.classList && img.classList.add('loaded'));
              }
            });

            obs.unobserve(tgt);
          });
        };

        const observer = new IntersectionObserver(onIntersect, observerOptions);

        // Observe stat blocks and float items and hero-card-bottom for entrance
        const toObserve = section.querySelectorAll('.stat-block, .float-item, .stat-number, .hero-card-bottom, .hero-thumb, .wide-image');
        toObserve.forEach((el) => observer.observe(el));

        // ADDITIONAL: ensure floating-stats items have accessible titles
        const floatItems = section.querySelectorAll('.floating-stats .float-item');
        floatItems.forEach((fi) => {
          if (!fi.getAttribute('role')) fi.setAttribute('role', 'status');
        });

        // LAZY-LOAD fallback for images with data-src (if developer used data-src pattern)
        const lazyImgs = section.querySelectorAll('img[data-src]');
        if ('IntersectionObserver' in window && lazyImgs.length) {
          const imgObserver = new IntersectionObserver((entries, io) => {
            entries.forEach((entry) => {
              if (!entry.isIntersecting) return;
              const img = entry.target;
              img.src = img.dataset.src;
              img.removeAttribute('data-src');
              img.addEventListener('load', () => img.classList && img.classList.add('loaded'));
              io.unobserve(img);
            });
          }, { rootMargin: '200px 0px' });

          lazyImgs.forEach((img) => imgObserver.observe(img));
        } else {
          // fallback: load immediately
          lazyImgs.forEach((img) => {
            img.src = img.dataset.src;
            img.removeAttribute('data-src');
          });
        }

        // Make <a class="btn"> behave more like a button for keyboard users
        const btnLinks = section.querySelectorAll('a.btn');
        btnLinks.forEach((link) => {
          // if link has href to fragment, focus handling already exists above
          link.setAttribute('role', 'button');
          link.setAttribute('tabindex', '0');
          link.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') link.click();
          });
        });

        // If hero CTA targets an element that doesn't exist, focus on body instead (graceful)
        document.addEventListener('click', (e) => {
          const a = e.target.closest && e.target.closest('a[href^="#"]');
          if (!a) return;
          const hash = a.getAttribute('href');
          if (hash && hash.startsWith('#')) {
            const target = document.querySelector(hash);
            if (!target) {
              // close any open overlays, fallback to top of page
              e.preventDefault();
              window.scrollTo({ top: 0, behavior: supportsSmooth ? 'smooth' : 'auto' });
              document.body.focus && document.body.focus();
            }
          }
        }, { passive: true });

        // small safety: expose nothing to window
      })();
    </script>
  </section>


